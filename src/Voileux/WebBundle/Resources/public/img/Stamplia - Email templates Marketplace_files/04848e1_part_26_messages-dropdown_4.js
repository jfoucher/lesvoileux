// Generated by CoffeeScript 1.4.0
(function() {

  App.View.MessagesDropdown = App.View.extend({
    className: 'messages',
    templateName: 'messages-dropdown',
    tagName: 'li',
    messages: [],
    events: {
      'click tr.message': 'showMessage'
    },
    initialize: function() {
      var _this = this;
      return App.messages.on('reset', function() {
        return _this.render();
      });
    },
    render: function() {
      var _this = this;
      this.messages = _.filter(App.messages.models, function(msg) {
        return !msg.get('read');
      });
      $(this.el).html(this.template({
        messages: this.messages
      }));
      console.log("messages", this.messages);
      console.log('length', this.messages.length);
      this.$('#trigger-messages-open').find('span.number').text(this.messages.length);
      return this.el;
    },
    showMessage: function(e) {
      var id;
      if (e != null) {
        e.preventDefault();
      }
      id = $(e.currentTarget).data('message-id');
      return window.location = '/backend#message/' + id;
    }
  });

}).call(this);
