// Generated by CoffeeScript 1.4.0
(function() {

  App.Model.Purchase = App.Model.extend({
    namespace: "purchase",
    url: function() {
      if (this.get('id')) {
        return "" + App.urlRoot + "/users/" + App.user.id + "/purchases/" + (this.get('id'));
      } else {
        return "" + App.urlRoot + "/users/" + App.user.id + "/purchases";
      }
    }
  });

  App.Model.PurchaseCollection = App.Collection.extend({
    model: App.Model.Purchase,
    namespace: "templates",
    fetched: null,
    parse: function(resp) {
      this.totalPages = resp.count;
      if (!this.namespace) {
        throw Error("a namespace property must be defined");
      }
      return resp[this.namespace];
    },
    initialize: function() {
      return this.fetched = $.Deferred();
    },
    fetch: function() {
      var _this = this;
      this.fetched = $.Deferred();
      return App.Collection.prototype.fetch.apply(this).done(function() {
        return _this.fetched.resolve(_this);
      });
    },
    url: function() {
      return "" + App.urlRoot + "/users/" + App.user.id + "/purchases";
    }
  });

}).call(this);
